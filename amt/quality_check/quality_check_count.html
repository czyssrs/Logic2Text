<!-- You must include this JavaScript file -->
<script src="https://assets.crowd.aws/crowd-html-elements.js"></script>

<!-- For the full list of available Crowd HTML Elements and their input/output documentation,
      please refer to https://docs.aws.amazon.com/sagemaker/latest/dg/sms-ui-template-reference.html -->

<!-- You must include crowd-form so that your task submits answers to MTurk -->
<crowd-form answer-format="flatten-objects">
    
<meta content="width=device-width,initial-scale=1" name="viewport" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<section class="container" id="Survey"><!-- Instructions -->
<div class="row">
<div class="col-xs-12 col-md-12">
<div class="panel panel-primary">

<a class="panel-heading" href="javascript:void(0);" id="collapseTrigger"><strong>Survey Instructions</strong> <span class="collapse-text">(Click to expand)</span> </a>

<div class="panel-body" id="instructionBody">
    <p> <strong>You are given a table with its title and its wikipedia source, together with one statement composed base on the table. Your job is to verify the following 3 aspects of the statement:</strong><br>
<br>


<strong>
    1. Is this statement about counting some rows in the table? <br>
    2. Is this statement factually correct, according to the table?<br>
    3. Is this statement grammatically correct and fluent? <br>
</strong>
<br>

<strong>
  "counting" -- counting means counting the number of some rows with certain attributes. <br>
</strong>
<br>

We list some examples below to help you understand. You can open the table wikipedia source link to understand the context. All statements are lower-cased.</strong>:
</p>
<div class="panel panel-default" class="col-lg-12">
<div class="panel-heading"> Table Wikipedia Link: <a href="https://en.wikipedia.org/wiki/Real_World/Road_Rules_Challenge:_The_Island">Road_Rules_Challenge:_The_Island</a> </div>

<div class="row">
    <div class="panel-body" id="instructionBody">
        <div class="col-lg-6">
            <table class='wikitable'>
              <tr><th>player</th><th>original season</th><th>gender</th><th>eliminated</th><th>placing</th></tr>
              <tr><td>derrick kosinski</td><td>rr : x - treme</td><td>male</td><td>winner</td><td>winner</td></tr>
              <tr><td>evelyn smith</td><td>fresh meat</td><td>female</td><td>winner</td><td>winner</td></tr>
              <tr><td>johnny devenanzio</td><td>rw : key west</td><td>male</td><td>winner</td><td>winner</td></tr>
              <tr><td>kenny santucci</td><td>fresh meat</td><td>male</td><td>winner</td><td>winner</td></tr>
              <tr><td>jenn grijalva</td><td>rw : denver</td><td>female</td><td>episode 8</td><td>runner - up</td></tr>
              <tr><td>paula meronek</td><td>rw : key west</td><td>female</td><td>episode 8</td><td>runner - up</td></tr>
              <tr><td>robin hibbard</td><td>rw : san diego</td><td>female</td><td>episode 8</td><td>runner - up</td></tr>
              <tr><td>ryan kehoe</td><td>fresh meat</td><td>male</td><td>episode 8</td><td>runner - up</td></tr>
              <tr><td>dunbar merrill</td><td>rw : sydney</td><td>male</td><td>episode 8</td><td>9th place</td></tr>
              <tr><td>johanna botta</td><td>rw : austin</td><td>female</td><td>episode 8</td><td>10th place</td></tr>
              <tr><td>kellyanne judd</td><td>rw : sydney</td><td>female</td><td>episode 8</td><td>11th place</td></tr>
              <tr><td>dan walsh</td><td>rr : viewers' revenge</td><td>male</td><td>episode 8</td><td>12th place</td></tr>
              <tr><td>colie edison</td><td>rw : denver</td><td>female</td><td>episode 7</td><td>13th place</td></tr>
              <tr><td>cohutta grindstaff</td><td>rw : sydney</td><td>male</td><td>episode 6</td><td>14th place</td></tr>
              <tr><td>tyrie ballard</td><td>rw : denver</td><td>male</td><td>episode 5</td><td>15th place</td></tr>
              <tr><td>ashli robson</td><td>rw : sydney</td><td>female</td><td>episode 4</td><td>16th place</td></tr>
              <tr><td>rachel robinson</td><td>rr : campus crawl</td><td>female</td><td>episode 3</td><td>17th place</td></tr>
              <tr><td>abram boise</td><td>rr : south pacific</td><td>male</td><td>episode 2</td><td>18th place</td></tr>
              <tr><td>dave malinosky</td><td>rw : hollywood</td><td>male</td><td>episode 2 (quit)</td><td>19th place</td></tr></table>
        </div>

        <div class="col-lg-6">
            <strong><font color="green">Accepted examples</font></strong>: <br><br>
            1. <strong>Statement:</strong> There are 4 winners in the challenge "the island"<br>
                <strong>1. Is this statement about counting some rows in the table?</strong><br>
                Your answer: yes <br>
                <strong>2. Is this statement factually correct, according to the table? </strong><br>
                Your answer: yes <br>
                <strong>3. Is this statement grammatically correct and fluent? </strong><br>
                Your answer: yes <br>
                (Explain: the action 'count' means counting some rows with certain attribute in a column. Here we are counting the number of rows whose "placing" coloumn is "winner", and the result is 4.)<br>
                <br>
            2. <strong>Statement:</strong> There are 5 winners in the challenge "the island"<br>
                <strong>1. Is this statement about counting some rows in the table?</strong><br>
                Your answer: yes <br>
                <strong>2. Is this statement factually correct, according to the table? </strong><br>
                Your answer: no <br>
                <strong>3. Is this statement grammatically correct and fluent? </strong><br>
                Your answer: yes <br>
                <br>
            3. <strong>Statement:</strong> 5 winners is in the challenge "the island"<br>
                <strong>1. Is this statement about counting some rows in the table?</strong><br>
                Your answer: yes <br>
                <strong>2. Is this statement factually correct, according to the table? </strong><br>
                Your answer: no <br>
                <strong>3. Is this statement grammatically correct and fluent? </strong><br>
                Your answer: no <br>
                <br>


        </div>
    </div>
</div>
</div>

<div class="panel panel-default" class="col-lg-12">
<div class="panel-heading"> Table Wikipedia Link: <a href="https://en.wikipedia.org/wiki/AFC_Champions_League">AFC_Champions_League</a>
<br></div>
   <div class="row">
    <div class="panel-body" id="instructionBody">
        <div class="col-lg-6">
            <table class='wikitable'>
              <tr><th>rank</th><th>member association</th><th>points</th><th>group stage</th><th>play - off</th><th>afc cup</th></tr>
              <tr><td>1</td><td>saudi arabia</td><td>860.5</td><td>4</td><td>0</td><td>0</td></tr>
              <tr><td>2</td><td>qatar</td><td>838.2</td><td>4</td><td>0</td><td>0</td></tr>
              <tr><td>3</td><td>iran</td><td>813.5</td><td>3</td><td>1</td><td>0</td></tr>
              <tr><td>4</td><td>uae</td><td>750.2</td><td>2</td><td>2</td><td>0</td></tr>
              <tr><td>5</td><td>uzbekistan</td><td>680.8</td><td>1</td><td>0</td><td>0</td></tr>
              <tr><td>6</td><td>india</td><td>106.4</td><td>0</td><td>0</td><td>2</td></tr>
              <tr><td>7</td><td>jordan</td><td>128.7</td><td>0</td><td>0</td><td>2</td></tr></table>
        </div>
        
        <div class="col-lg-6">
            <br>
            <strong><font color="green">Accepted examples</font></strong>: <br><br>
            1. <strong>Statement:</strong> in the afc champion league, qatar won 0 afc cup<br>
                <strong>1. Is this statement about counting some rows in the table?</strong><br>
                Your answer: no <br>
                <strong>2. Is this statement factually correct, according to the table? </strong><br>
                Your answer: yes <br>
                <strong>3. Is this statement grammatically correct and fluent? </strong><br>
                Your answer: yes <br>
                (Explain: this is not counting rows in the table. It's just a plain description based on a single row) <br>
                <br>
            2. <strong>Statement:</strong> in the afc champion league, only 2 members won more than 0 afc cup<br>
                <strong>1. Is this statement about counting some rows in the table?</strong><br>
                Your answer: yes <br>
                <strong>2. Is this statement factually correct, according to the table? </strong><br>
                Your answer: yes <br>
                <strong>3. Is this statement grammatically correct and fluent? </strong><br>
                Your answer: yes <br>
                (Explain: this statement is counting the last 2 rows) <br>
                <br>
            3. <strong>Statement:</strong> there are 7 member associations in the afc champion league<br>
                <strong>1. Is this statement about counting some rows in the table?</strong><br>
                Your answer: yes <br>
                <strong>2. Is this statement factually correct, according to the table? </strong><br>
                Your answer: yes <br>
                <strong>3. Is this statement grammatically correct and fluent? </strong><br>
                Your answer: yes <br>
                (Explain: this statement is counting all rows) <br>
                <br>
        </div>
    </div>
    </div>
</div>

</div>
</div>

<div class="row" id="workContent">
<div class="col-sm-12 col-sm-offset-0">
<div class="panel panel-default" style="width: 100%;">
    
<div class="panel-heading">
    First read the following table and the statement, then verify the 3 aspects of the statement based on the table:
</div>

<div class="panel-body">
Table Source: <a href=${wiki1}>${topic1}</a><br>
Table title: ${topic1}
<div id="url1">${url1}</div><br>
<strong>Statement: ${sent1} </strong><br>
  <p>1. Is this statement about counting some rows in the table? <br>
  <select name="verify_action">
      <option value="tmp1">-- click to select --</option>
      <option value="yes">yes</option>
      <option value="no">no</option>
      </select>
      </p>
  <p>2. Is this statement factually correct, according to the table? <br>
  <select name="verify_fact">
      <option value="tmp2">-- click to select --</option>
      <option value="yes">yes</option>
      <option value="no">no</option>
      </select>
      </p>
  <p>3. Is this statement grammatically correct and fluent? <br>
  <select name="verify_grammar">
      <option value="tmp3">-- click to select --</option>
      <option value="yes">yes</option>
      <option value="no">no</option>
      </select>
      </p>


</div>

</div>
</div>
</div>

</div>
</div>
</section>

<script type="text/javascript">
jQuery.ajaxSetup({async:false});
$(document).ready(function(){
    var table_content = "";
    var cur = $(`#url1`).text()
    $.get(cur, function(data){
        var nwe_data = CSV2Table(data);
        table_content += nwe_data;
    }, 'text').fail(function() {
    });
    $(`#url1`).html(table_content);
    
    $('a').each(function(i, val){
    if(val.href.match(/wikipedia/g))
        val.target="_blank";
    else
        val.href = "javascript:void(0)"
    });

    var tabtrigger = $('#collapseTrigger');
    var tabcontent = $('#instructionBody');

    $('.collapse-text').text('(Click to expand)');
    tabtrigger.click(function(){
      tabcontent.toggle();
      var isVisible = tabcontent.is(':visible');
      if(isVisible){
        $('.collapse-text').text('(Click to collapse)');
      }else{
        $('.collapse-text').text('(Click to expand)');
      }
    });

});
    
function CSV2Table(data) {
    var lines = data.split("\n");
    lines.pop();
    //var headers = lines[0].split(separator);
    var output = []

    // var column = "<tr><td id=\"HEADER\"></td>"
    // for (i = 0; i < lines[0].slice(0,-1).split("#").length; i++){
    //   this_i = i + 1
    //   column += "<td id=\"HEADER\">" + this_i + "</td>";
    // }
    // column += "</tr>"
    // output.push(column);

    for (i = 0; i < lines.length; i++){
        //var fields = lines[i].split("#");
        // add padding
        // if(i == 0){
        //     output.push("<tr><td id=\"HEADER\"></td><th>" + lines[i].slice(0,-1).split("#").join("</th><th>") + "</th></tr>");
        // }
        // else{
        //     output.push("<tr><td id=\"HEADER\">" + i + "</td><td>" + lines[i].slice(0,-1).split("#").join("</td><td>") + "</td></tr>");
        // }
        if(i == 0){
            output.push("<tr><th>" + lines[i].slice(0,-1).split("#").join("</th><th>") + "</th></tr>");
        }
        else{
            output.push("<tr><td>" + lines[i].slice(0,-1).split("#").join("</td><td>") + "</td></tr>");            
        }
    }
    output = "<table class='wikitable'>" + output.join("") + "</table>";
    return output
}
</script>

<link crossorigin="anonymous" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" integrity="sha384-IS73LIqjtYesmURkDE9MXKbXqYA8rvKEp/ghicjem7Vc3mGRdQRptJSz60tvrB6+" rel="stylesheet" />
<style type="text/css">#collapseTrigger{ color:#fff; display: block; text-decoration: none; } #submitButton{ white-space: normal; } .image{ margin-bottom: 15px; }
</style>
        <style>
            table, tr {
                border: 1px solid black;
                padding: 5px;
                color: black;
                font-family: verdana;
                background-color: lightyellow;
                font-size: smaller;
            }

            td#HEADER  {background-color: lightblue;}

            th {
                border: 1px solid black;
                padding: 5px;
                color: black;
                font-family: verdana;
                font-size: smaller;
            }
            td {
                border: 1px solid black;
                padding: 5px;
                color: black;
                font-family: verdana;
                background-color: #F7F8FA;
                font-size: smaller;
            }
            .panel {
                display: inline-block;
                background: white;
            }
            p {
              display: block;
              margin-top: 0em;
              margin-bottom: 1em;
              margin-left: 1em;
              margin-right: 1em;
            }
</style>
